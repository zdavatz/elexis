<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<!-- Copyright (c) 2010, Medelexis AG, Baden -->
<!-- Copyright 2012 by Niklaus Giger <niklaus.giger@member.fsf.org -->
<!-- -->
<!-- Contributors: * G. Weirich - initial implementation -->
<!-- * Niklaus Giger - 2012. Mayor rework for demoDB, multiple languages, 
	workspace, JPA -->
<!-- All rights reserved. This program and the accompanying materials -->
<!-- are made available under the terms of the Eclipse Public License v1.0 -->
<!-- which accompanies this distribution, and is available at -->
<!-- http://www.eclipse.org/legal/epl-v10.html -->

<!-- This creates the izPack installer package -->
<installation version="1.0">
	<info>
		<appname>Elexis</appname>
		<appversion>@{version}</appversion>
		<authors>
			<author name="www.elexis.ch" email="info@elexis.ch" />
		</authors>
		<url>http://www.elexis.ch</url>
	</info>

	<guiprefs width="700" height="520" resizable="yes" />

	<locale>
		<langpack iso3="deu" />
		<langpack iso3="eng" />
		<langpack iso3="fra" />
	</locale>
	<variables>
		<variable name="appversion" value="@{version}" />
	</variables>
	<native type="izpack" name="ShellLink.dll" />

	<resources>
		<res id="BSFActionsSpec.xml" src="rsc/BSFActionsSpec.xml" />
		<res id="copyConfiguration.bsh" src="rsc/copyConfiguration.bsh" />
		<res id="unzipDemoDB.bsh" src="rsc/unzipDemoDB.bsh" />
		<res id="TargetPanel.dir" src="rsc/TargetPanel.txt" />
		<res id="packsLang.xml_eng" src="rsc/i18n/packsLang.xml_eng" />
		<res id="packsLang.xml_fra" src="rsc/i18n/packsLang.xml_fra" />
		<res id="HTMLLicencePanel.licence" src="rsc/license.html" parse="yes" />
		<res id="HTMLInfoPanel.info" src="rsc/info.html" parse="yes" />
		<res id="HTMLInfoPanel.info_fra" src="rsc/info_fra.html" parse="yes" />
		<res id="HTMLInfoPanel.info_eng" src="rsc/info_eng.html" parse="yes" />
		<res id="medelexis-logo.png" src="rsc/elexis-logo.png" />
		<res id="Win_shortcutSpec.xml" src="rsc/Shortcuts_Windows.xml" />
		<res id="Unix_shortcutSpec.xml" src="rsc/Shortcuts_Linux.xml" />
	</resources>

	<panels>
		<panel classname="HTMLInfoPanel" />
		<panel classname="HTMLLicencePanel" />
		<panel classname="TargetPanel" />
		<panel classname="PacksPanel" />
		<panel classname="InstallPanel" />
		<panel classname="ShortcutPanel" />
		<panel classname="FinishPanel" />
	</panels>

	<conditions>
		<condition type="variable" id="is32bit">
			<name>SYSTEM_sun_arch_data_model</name>
			<value>32</value>
		</condition>

		<condition type="variable" id="is64bit">
			<name>SYSTEM_sun_arch_data_model</name>
			<value>64</value>
		</condition>
	</conditions>

	<packs>
		<pack name="DemoDB" id="DemoDB" required="no" preselected="no">
			<description>DemoDB. Nützlich, um Elexis kennen zu lernen.
			</description>
			<singlefile src="rsc/demoDB_elexis_2.1.5.4.zip" target="$INSTALL_PATH/demoDB.zip" />
		</pack>
		<pack name="Schweiz (deutsch)" required="no">
			<description>Abrechnungs- und Diagnosesysteme Schweiz</description>
			<fileset dir="." targetdir="$INSTALL_PATH">
				<include name="plugins/ch.elexis.artikel_ch_*.jar" />
				<include name="plugins/ch.elexis.arzttarife_ch_*.jar" />
				<include name="plugins/ch.elexis.diagnosecodes_ch_*.jar" />
				<include name="plugins/ch.elexis.ebanking_ch_*.jar" />
				<include name="plugins/ch.elexis.labortarif.ch2009_*.jar" />
			</fileset>
		</pack>
		<pack name="OpenOffice-2.0-Anbindung" required="no">
			<description>Anbindung von OpenOffice.org 2.0 (nur Windows und
				KDE/XFCE)
			</description>
			<fileset dir="." targetdir="$INSTALL_PATH">
				<include name="plugins/ch.elexis.noatext_*.jar" />
			</fileset>
		</pack>
		<pack name="Medelexis Text-Templator" required="no">
			<description>Flexible Ausgabe für LibreOffice und andere
				Textprogramme
			</description>
			<fileset dir="." targetdir="$INSTALL_PATH">
				<include name="plugins/ch.medelexis.text.templator_*.jar" />
			</fileset>
		</pack>
		<pack name="Elexis-Kern" required="yes">
			<description>Elexis-Hauptprogramm</description>

			<fileset dir="rsc" targetdir="$INSTALL_PATH">
				<include name="configuration/**" />
				<include name="*.html" />
				<include name="*.rtf" />
				<include name="*.ico" />
				<include name="*.png" />
				<include name="*.xpm" />
			</fileset>

			<fileset dir="." targetdir="$INSTALL_PATH">
				<include name="plugins/ch.elexis.h2.connector_**" />
				<include name="plugins/ch.elexis.mysql.connector_**" />
				<include name="plugins/ch.elexis.postgresql.connector_**" />
				<include name="plugins/ch.elexis.core_*.jar" />
				<include name="plugins/ch.elexis.core_*.jar" />
				<include name="plugins/ch.elexis.eigenartikel_*.jar" />
				<include name="plugins/ch.elexis.importer.div_*.jar" />
				<include name="plugins/ch.elexis_*.jar" />
				<include name="plugins/ch.elexis.scripting.beanshell_*.jar" />
				<include name="plugins/ch.ngiger.elexis.branding_*.jar" />
				<include name="plugins/ch.rgw.utility_*.jar" />
				<include name="plugins/de.fhdo.elexis.perspective_*.jar" />
				<include name="plugins/org.iatrix.help.wiki_*.jar" />
			</fileset>
		</pack>

		<pack name="Eclipse librarires" required="yes">
			<description>Eclipse and other needed libraries</description>
			<fileset dir="./plugins2" targetdir="$INSTALL_PATH/plugins">
				<include name="**/*" />
				<exclude name="org.eclipse.swt.*" />
				<exclude name="org.eclipse.ui.cocoa.*" />
				<exclude name="org.eclipse.ui.workbench.compatibility_*" />
			</fileset>
			
			<fileset dir="@{osgi}" targetdir="$INSTALL_PATH">
				<include name="plugins/org.eclipse.update.configurator_*" />
			</fileset>
		</pack>

		<pack name="Linux x86-64-bit" required="yes" condition="izpack.linuxinstall+is64bit" >
			<description>Betriebsystem abhängige Komponenten</description>
			<executable targetfile="$INSTALL_PATH/elexis" keep="true"/>
			<singlefile src="rsc/TargetPanel.txt" target="$INSTALL_PATH/Condition.linux_64_bit" />
			<fileset dir="linux.gtk.x86_64" targetdir="$INSTALL_PATH" >
				<include name="plugins/*linux*.jar" />
			</fileset>
			<fileset dir="@{osPath}/linux.gtk.x86_64" targetdir="$INSTALL_PATH" >
				<include name="**" />
			</fileset>
		</pack>

		<pack name="Linux x86-32-bit" required="yes" condition="izpack.linuxinstall+is32bit" >
			<description>Betriebsystem abhängige Komponenten</description>
			<executable targetfile="$INSTALL_PATH/elexis" keep="true"/>
			<singlefile src="rsc/TargetPanel.txt" target="$INSTALL_PATH/Condition.linux_32_bit" />
			<fileset dir="linux.gtk.x86_64" targetdir="$INSTALL_PATH" >
				<include name="plugins/*linux*.jar" />
			</fileset>
			<fileset dir="@{osPath}/linux.gtk.x86" targetdir="$INSTALL_PATH" >
				<include name="**" />
			</fileset>
		</pack>

		<pack name="MacOSX x86-64-bit" required="yes" condition="izpack.macinstall+is64bit" >
			<description>Betriebsystem abhängige Komponenten</description>
			<executable targetfile="$INSTALL_PATH/elexis.app/Contents/MacOS/elexis" keep="true" />
			<singlefile src="rsc/TargetPanel.txt" target="$INSTALL_PATH/Condition.linux_64_bit" />
			<fileset dir="macosx.cocoa.x86_64" targetdir="$INSTALL_PATH" >
				<include name="plugins/*macosx*.jar" />
			</fileset>
			<fileset dir="@{osPath}/macosx.cocoa.x86_64" targetdir="$INSTALL_PATH" >
				<include name="**" />
			</fileset>
		</pack>

		<pack name="MacOSX x86-32-bit" required="yes" condition="izpack.macinstall+is32bit" >
			<description>Betriebsystem abhängige Komponenten</description>
			<executable targetfile="$INSTALL_PATH/elexis.app/Contents/MacOS/elexis" keep="true" />
			<singlefile src="rsc/TargetPanel.txt" target="$INSTALL_PATH/Condition.linux_32_bit" />
			<fileset dir="macosx.cocoa.x86" targetdir="$INSTALL_PATH" >
				<include name="plugins/*macosx*.jar" />
			</fileset>
			<fileset dir="@{osPath}/macosx.cocoa.x86" targetdir="$INSTALL_PATH" >
				<include name="**" />
			</fileset>
		</pack>

		<pack name="Windows x86-64-bit" required="yes" condition="izpack.windowsinstall+is64bit" >
			<description>Betriebsystem abhängige Komponenten</description>
			<executable targetfile="$INSTALL_PATH/elexis.exe" keep="true"/>
			<singlefile src="rsc/TargetPanel.txt" target="$INSTALL_PATH/Condition.windowsinstall.64" />
			<fileset dir="win32.win32.x86_64" targetdir="$INSTALL_PATH" >
				<include name="plugins/*win32*.jar" />
			</fileset>
			<fileset dir="@{osPath}/win32.win32.x86_64" targetdir="$INSTALL_PATH" >
				<include name="**" />
			</fileset>
		</pack>

		<pack name="Windows x86-32-bit" required="yes" condition="izpack.windowsinstall+is32bit" >
			<description>Betriebsystem abhängige Komponenten</description>
			<executable targetfile="$INSTALL_PATH/elexis.exe" keep="true"/>
			<singlefile src="rsc/TargetPanel.txt" target="$INSTALL_PATH/Condition.windowsinstall.32" />
			<fileset dir="win32.win32.x86" targetdir="$INSTALL_PATH" >
				<include name="plugins/*win32*.jar" />
			</fileset>
			<fileset dir="@{osPath}/win32.win32.x86" targetdir="$INSTALL_PATH" >
				<include name="**" />
			</fileset>
		</pack>
	</packs>

	<jar src="rsc/deps/apache/commons-logging/1.1.1/commons-logging-1.1.1.jar"
		stage="both" />
	<jar src="rsc/deps/bsh/bsh/2.0b4/bsh-2.0b4.jar" stage="both" />
	<jar src="rsc/deps/apache/bsf/2.4.0/bsf-2.4.0.jar" stage="both" />
	<jar src="rsc/deps/apache/commons-io/1.4/commons-io-1.4.jar" stage="both" />

	<listeners>
		<listener installer="BSFInstallerListener" uninstaller="BSFUninstallerListener" />
	</listeners>

	<summarylogfilepath>
		$INSTALL_PATH/Uninstaller/MySummary.htm
	</summarylogfilepath>

</installation>
